<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pharaoh Hieroglyph Converter</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Egyptian+Hieroglyphs&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --gold: #ffd700;
      --dark-gold: #daa520;
      --teal: #008080;
      --dark-teal: #006666;
      --black: #1a1a1a;
    }
    
    body {
      font-family: 'Cairo', sans-serif;
      background: var(--black) url('https://images.unsplash.com/photo-1548438294-1ad5d5f4f063?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center/cover;
      color: white;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
    }
    
    .card {
      background: rgba(0, 0, 0, 0.8);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 0 20px #000;
    }
    
    #glyphDisplay {
      font-family: 'Noto Sans Egyptian Hieroglyphs', sans-serif;
      font-size: 48px;
      min-height: 60px;
      margin: 20px 0;
      color: var(--gold);
      background: rgba(0, 0, 0, 0.5);
      padding: 15px;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    input, button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      font-size: 16px;
    }
    
    input {
      background: #f0f0f0;
    }
    
    #convertBtn {
      background: var(--teal);
      color: white;
    }
    
    #cameraBtn {
      background: var(--gold);
      color: var(--black);
    }
    
    video, #resultCanvas {
      width: 100%;
      border-radius: 8px;
      margin-top: 10px;
      display: none;
    }
    
    .actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .actions button {
      flex: 1;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2><i class="fas fa-phoenix-framework"></i> Pharaoh Hieroglyph Converter</h2>
    <input type="text" id="username" placeholder="Type your name in English">
    <button id="convertBtn"><i class="fas fa-exchange-alt"></i> Convert</button>
    <div id="glyphDisplay">𓂀</div>
    
    <button id="cameraBtn"><i class="fas fa-camera"></i> Open Camera</button>
    
    <video id="video" autoplay muted playsinline></video>
    <canvas id="resultCanvas"></canvas>
    
    <div class="actions" id="actionButtons" style="display:none;">
      <button id="captureBtn" style="background:var(--teal);"><i class="fas fa-camera-retro"></i> Capture</button>
      <button id="cancelBtn" style="background:#d9534f;"><i class="fas fa-times"></i> Cancel</button>
    </div>
    
    <div class="actions" id="downloadSection" style="display:none;">
      <button id="downloadBtn" style="background:var(--gold);color:var(--black);"><i class="fas fa-download"></i> Download</button>
      <button id="newPhotoBtn" style="background:var(--teal);"><i class="fas fa-redo"></i> Retake</button>
    </div>
  </div>

  <script>
    // Hieroglyphic Characters Map
    const hieroglyphMap = {
      'A': '𓄿', 'B': '𓃀', 'C': '𓍿', 'D': '𓂧', 'E': '𓇋',
      'F': '𓆑', 'G': '𓎼', 'H': '𓎛', 'I': '𓇋', 'J': '𓆓',
      'K': '𓎡', 'L': '𓃭', 'M': '𓅓', 'N': '𓈖', 'O': '𓅱',
      'P': '𓊪', 'Q': '𓏘', 'R': '𓂋', 'S': '𓋴', 'T': '𓏏',
      'U': '𓅱', 'V': '𓆑', 'W': '𓅱', 'X': '𓐍', 'Y': '𓇌', 'Z': '𓊃',
      ' ': ' '
    };

    // DOM Elements
    const elements = {
      username: document.getElementById('username'),
      convertBtn: document.getElementById('convertBtn'),
      glyphDisplay: document.getElementById('glyphDisplay'),
      cameraBtn: document.getElementById('cameraBtn'),
      video: document.getElementById('video'),
      resultCanvas: document.getElementById('resultCanvas'),
      actionButtons: document.getElementById('actionButtons'),
      captureBtn: document.getElementById('captureBtn'),
      cancelBtn: document.getElementById('cancelBtn'),
      downloadSection: document.getElementById('downloadSection'),
      downloadBtn: document.getElementById('downloadBtn'),
      newPhotoBtn: document.getElementById('newPhotoBtn')
    };

    let stream = null;

    // Convert Name to Hieroglyphs
    elements.convertBtn.addEventListener('click', () => {
      const name = elements.username.value.trim().toUpperCase();
      let result = '';
      
      for (const char of name) {
        result += hieroglyphMap[char] || '?';
      }
      
      elements.glyphDisplay.innerHTML = result.split('').map(char => 
        `<span style="display:inline-block;margin:0 2px;">${char}</span>`
      ).join('') || '𓂀';
    });

    // Camera Functions
    elements.cameraBtn.addEventListener('click', toggleCamera);
    elements.cancelBtn.addEventListener('click', toggleCamera);
    elements.newPhotoBtn.addEventListener('click', toggleCamera);

    async function toggleCamera() {
      if (stream) {
        // Turn off camera
        stream.getTracks().forEach(track => track.stop());
        stream = null;
        elements.video.style.display = 'none';
        elements.actionButtons.style.display = 'none';
        elements.downloadSection.style.display = 'none';
        elements.resultCanvas.style.display = 'none';
        elements.cameraBtn.innerHTML = '<i class="fas fa-camera"></i> Open Camera';
        return;
      }

      // Turn on camera
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        elements.video.srcObject = stream;
        elements.video.style.display = 'block';
        elements.actionButtons.style.display = 'flex';
        elements.cameraBtn.innerHTML = '<i class="fas fa-camera-slash"></i> Close Camera';
      } catch (err) {
        alert("Camera error: " + err.message);
      }
    }

    // Capture Photo
    elements.captureBtn.addEventListener('click', () => {
      if (!stream) return;
      
      const ctx = elements.resultCanvas.getContext('2d');
      elements.resultCanvas.width = elements.video.videoWidth;
      elements.resultCanvas.height = elements.video.videoHeight;
      
      // Draw video frame
      ctx.drawImage(elements.video, 0, 0);
      
      // Add hieroglyphs
      const name = elements.username.value.trim();
      if (name) {
        ctx.font = 'bold 50px "Noto Sans Egyptian Hieroglyphs", sans-serif';
        ctx.fillStyle = 'rgba(255, 215, 0, 0.9)';
        ctx.textAlign = 'center';
        ctx.fillText(
          name.split('').map(c => hieroglyphMap[c.toUpperCase()] || '?').join(''),
          elements.resultCanvas.width / 2,
          80
        );
      }
      
      elements.resultCanvas.style.display = 'block';
      elements.video.style.display = 'none';
      elements.actionButtons.style.display = 'none';
      elements.downloadSection.style.display = 'flex';
    });

    // Download Image
    elements.downloadBtn.addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'hieroglyph-photo.png';
      link.href = elements.resultCanvas.toDataURL('image/png');
      link.click();
    });
  </script>
</body>
</html>
